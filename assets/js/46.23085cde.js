(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{525:function(v,_,e){"use strict";e.r(_);var s=e(4),o=Object(s.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"shell-入门教程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shell-入门教程"}},[v._v("#")]),v._v(" Shell 入门教程")]),v._v(" "),e("p",[e("strong",[v._v("本文为译文，原文链接")]),v._v("："),e("a",{attrs:{href:"https://github.com/hacker-tools/hacker-tools.github.io/blob/master/shell.md",target:"_blank",rel:"noopener noreferrer"}},[v._v("shell"),e("OutboundLink")],1)]),v._v(" "),e("p",[e("code",[v._v("shell")]),v._v("是一个高效的、文本化的计算机接口。")]),v._v(" "),e("p",[e("code",[v._v("shell")]),v._v("提示符：当你打开终端时看到的一切。可以让用户执行的程序和命令，常见的有：")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("cd")]),v._v("改变目录")]),v._v(" "),e("li",[e("code",[v._v("ls")]),v._v("列出文件和目录")]),v._v(" "),e("li",[e("code",[v._v("mv")]),v._v("和"),e("code",[v._v("cp")]),v._v("移动和复制文件")])]),v._v(" "),e("p",[v._v("但是"),e("code",[v._v("shell")]),v._v("允许您做更多的事情；您可以调用计算机上的任何程序，并且命令行工具的存在就是为了完成您可能想做的任何事情。他们往往比他们的图形对手更有效率。我们这门课会讲到很多。")]),v._v(" "),e("p",[e("code",[v._v("shell")]),v._v('提供交互式编程语言 ("脚本")。有很多种'),e("code",[v._v("shell")]),v._v("：")]),v._v(" "),e("ul",[e("li",[v._v("您可能用过"),e("code",[v._v("sh")]),v._v("或者"),e("code",[v._v("bash")])]),v._v(" "),e("li",[v._v("和语言相关的"),e("code",[v._v("shell")]),v._v("："),e("code",[v._v("csh")])]),v._v(" "),e("li",[v._v("或者更好用的shell："),e("code",[v._v("fish")]),v._v("，"),e("code",[v._v("zsh")]),v._v("，"),e("code",[v._v("ksh")])])]),v._v(" "),e("p",[v._v("在这个课堂上，我们将关注无处不在的"),e("code",[v._v("sh")]),v._v("和"),e("code",[v._v("bash")]),v._v("，但是使用其他的"),e("code",[v._v("shell")]),v._v("感觉更好。我喜欢"),e("code",[v._v("fish")]),v._v("。")]),v._v(" "),e("p",[v._v("在您的工具箱中，"),e("code",[v._v("shell")]),v._v("程序是一个非常有用的工具。可以直接在提示符下编写程序，也可以将程序写入文件。")]),v._v(" "),e("p",[v._v("通过"),e("code",[v._v("#!/bin/sh")]),v._v("+"),e("code",[v._v("chmod +x")]),v._v("将shell程序变成可以执行的")]),v._v(" "),e("h2",{attrs:{id:"使用shell工作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用shell工作"}},[v._v("#")]),v._v(" 使用"),e("code",[v._v("shell")]),v._v("工作")]),v._v(" "),e("p",[v._v("将一个命令运行多次：")]),v._v(" "),e("div",{staticClass:"language-Shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("for")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[v._v("i")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("in")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[v._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[v._v("seq")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[v._v("1")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[v._v("5")]),e("span",{pre:!0,attrs:{class:"token variable"}},[v._v(")")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(";")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("do")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[v._v("echo")]),v._v(" hello"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(";")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("done")]),v._v("\n")])])]),e("p",[v._v("有很多东西可以展开来讲：")]),v._v(" "),e("ul",[e("li",[e("p",[e("code",[v._v("for x in list; do BODY; done")])]),v._v(" "),e("ul",[e("li",[e("code",[v._v(";")]),v._v("终止一个命令 -- 相当于换行")]),v._v(" "),e("li",[v._v("遍历"),e("code",[v._v("list")]),v._v("，将每个值赋值给"),e("code",[v._v("x")]),v._v("，然后运行")]),v._v(" "),e("li",[v._v("分割标志符是“空格”，我们稍后会讲到")]),v._v(" "),e("li",[e("code",[v._v("shell")]),v._v("中没有花括号，所以使用"),e("code",[v._v("do")]),v._v("+"),e("code",[v._v("done")])])])]),v._v(" "),e("li",[e("p",[e("code",[v._v("$(seq 1 5)")])]),v._v(" "),e("ul",[e("li",[v._v("运行"),e("code",[v._v("seq")]),v._v("命令，参数分别为1和5")]),v._v(" "),e("li",[v._v("使用括号内命令的输出替换 $()")]),v._v(" "),e("li",[v._v("相当于")])]),v._v(" "),e("div",{staticClass:"language-Shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[v._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("for")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[v._v("i")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("in")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[v._v("1")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[v._v("2")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[v._v("3")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[v._v("4")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[v._v("5")]),v._v("\n")])])])]),v._v(" "),e("li",[e("p",[e("code",[v._v("echo hello")])]),v._v(" "),e("ul",[e("li",[e("code",[v._v("shell")]),v._v("脚本中的所有内容都是命令")]),v._v(" "),e("li",[v._v("在本例中，运行"),e("code",[v._v("echo")]),v._v("命令，将打印该命令的参数"),e("code",[v._v("hello")])]),v._v(" "),e("li",[v._v("所有命令都可以在"),e("code",[v._v("$PATH")]),v._v("搜索到")])])])]),v._v(" "),e("p",[v._v("我们可以举个例子：")]),v._v(" "),e("div",{staticClass:"language-Shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("for")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[v._v("f")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("in")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[v._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[v._v("ls")]),e("span",{pre:!0,attrs:{class:"token variable"}},[v._v(")")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(";")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("do")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[v._v("echo")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[v._v("$f")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(";")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("done")]),v._v("\n")])])]),e("p",[v._v("将打印当前目录中的每个文件名。可以使用"),e("code",[v._v("=")]),v._v("设置变量的值（"),e("code",[v._v("=")]),v._v("两边不需要空格）")]),v._v(" "),e("div",{staticClass:"language-Shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[v._v("foo")]),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),v._v("bar\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[v._v("echo")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[v._v("$foo")]),v._v("\n")])])]),e("p",[v._v("这里也有一些特殊的变量：")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("$1")]),v._v("-"),e("code",[v._v("$9")]),v._v("：脚本的参数")]),v._v(" "),e("li",[e("code",[v._v("$0")]),v._v("：脚本的名称")]),v._v(" "),e("li",[e("code",[v._v("$#")]),v._v("：脚本的参数个数")]),v._v(" "),e("li",[e("code",[v._v("$$")]),v._v("：当前脚本的进程"),e("code",[v._v("ID")])])]),v._v(" "),e("p",[v._v("只打印目录")]),v._v(" "),e("div",{staticClass:"language-Shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("for")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[v._v("f")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("in")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[v._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[v._v("ls")]),e("span",{pre:!0,attrs:{class:"token variable"}},[v._v(")")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(";")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("do")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("if")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[v._v("test")]),v._v(" -d "),e("span",{pre:!0,attrs:{class:"token variable"}},[v._v("$f")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(";")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("then")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[v._v("echo")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[v._v("dir")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[v._v("$f")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(";")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("fi")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(";")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("done")]),v._v("\n")])])]),e("p",[v._v("这里展开来讲：")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("if CONDITION; then BODY; fi")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("CONDITION")]),v._v("是一个命令，如果返回时为0"),e("code",[v._v("(success)")]),v._v("，就会执行"),e("code",[v._v("BODY")])]),v._v(" "),e("li",[v._v("也可以继续执行"),e("code",[v._v("else")]),v._v("或者"),e("code",[v._v("elif")])]),v._v(" "),e("li",[v._v("同样，没有花括号，所以使用"),e("code",[v._v("then")]),v._v("和"),e("code",[v._v("fi")])])])]),v._v(" "),e("li",[e("code",[v._v("test")]),v._v("是另外一个命令，提供各式各样的检查与对比功能，退出时会返回对比结果，如果为真，则返回0"),e("code",[v._v("($?)")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("man COMMAND")]),v._v("会对您有很大的帮助，比如："),e("code",[v._v("man test")])]),v._v(" "),e("li",[v._v("也可以使用"),e("code",[v._v("[")]),v._v("+"),e("code",[v._v("]")]),v._v("执行，比如："),e("code",[v._v("[ -d $f ]")]),v._v(" "),e("ul",[e("li",[v._v("查看一下"),e("code",[v._v("man test")]),v._v("和"),e("code",[v._v("which [")]),v._v("的执行结果")])])])])])]),v._v(" "),e("p",[v._v("可是等等！结果是错误的！如果有个文件叫做“我的文档怎么办”？")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("for f in $(ls)")]),v._v("展开为"),e("code",[v._v("for f in My Documents")])]),v._v(" "),e("li",[v._v("先以"),e("code",[v._v("My")]),v._v("为"),e("code",[v._v("test")]),v._v("的执行参数，然后以"),e("code",[v._v("Documents")]),v._v("作为参数")]),v._v(" "),e("li",[v._v("这不是我们想要的！")]),v._v(" "),e("li",[e("code",[v._v("shell")]),v._v("脚本中导致出现问题最多的原因")])]),v._v(" "),e("h2",{attrs:{id:"参数分割"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数分割"}},[v._v("#")]),v._v(" 参数分割")]),v._v(" "),e("p",[e("code",[v._v("Bash")]),v._v("是通过空格分割参数；但这并不总是您想要的！")]),v._v(" "),e("ul",[e("li",[v._v("需要使用引号处理"),e("code",[v._v('for f in "My Documents"')]),v._v("中"),e("code",[v._v("f")]),v._v("的空格，才能正确的执行")]),v._v(" "),e("li",[v._v("其他地方也有同样的问题，您看到过吗？比如"),e("code",[v._v("test -d $f")]),v._v("：如果"),e("code",[v._v("$f")]),v._v("中包含空格，"),e("code",[v._v("test")]),v._v("将会发生错误！")]),v._v(" "),e("li",[e("code",[v._v("echo")]),v._v("碰巧没有问题，因为按空格分隔联接，但是如果文件名包含换行符，怎么办？！变成空格！")]),v._v(" "),e("li",[v._v("引号用于所有不希望被拆分的参数")]),v._v(" "),e("li",[v._v("我们该如何修复上面的脚本呢？您认为"),e("code",[v._v('for f in "$(ls)"')]),v._v("怎么样？")])]),v._v(" "),e("p",[v._v("答案是通配符！")]),v._v(" "),e("ul",[e("li",[v._v("Bash知道如何使用模板查找文件：\n"),e("ul",[e("li",[e("code",[v._v("*")]),v._v(" 任意字符串")]),v._v(" "),e("li",[e("code",[v._v("?")]),v._v(" 任意字符")]),v._v(" "),e("li",[e("code",[v._v("{a,b,c}")]),v._v(" 这些字符中的任意一个")])])]),v._v(" "),e("li",[e("code",[v._v("for f in *")]),v._v("：这个文件夹下所有的文件")]),v._v(" "),e("li",[v._v("在使用通配符时，每个匹配的文件都将变成自己的参数\n"),e("ul",[e("li",[v._v("在使用时，仍需要确保引号的正确使用："),e("code",[v._v('test -d "$f"')])])])]),v._v(" "),e("li",[v._v("可以使用这些提高通配符效率：\n"),e("ul",[e("li",[e("code",[v._v("for f in a*")]),v._v(": 当前文件夹下，所有以"),e("code",[v._v("a")]),v._v("开头的文件")]),v._v(" "),e("li",[e("code",[v._v("for f in foo/*.txt")]),v._v(":"),e("code",[v._v("foo")]),v._v("文件夹下，所有以"),e("code",[v._v(".txt")]),v._v("结尾的文件")]),v._v(" "),e("li",[e("code",[v._v("for f in foo/*/p??.txt")]),v._v(": 在"),e("code",[v._v("foo")]),v._v("的子文件夹下，以"),e("code",[v._v("p")]),v._v("开头的三个字母的文件")])])])]),v._v(" "),e("p",[v._v("空格的问题不止于此：")]),v._v(" "),e("ul",[e("li",[e("code",[v._v('if [ $foo = "bar" ]; then')]),v._v("-- 看看这个问题？")]),v._v(" "),e("li",[v._v("如果"),e("code",[v._v("$foo")]),v._v("是空的呢？"),e("code",[v._v("[")]),v._v("的参数是"),e("code",[v._v("=")]),v._v("和"),e("code",[v._v("bar")]),v._v("...")]),v._v(" "),e("li",[v._v("可以用"),e("code",[v._v('[ x$foo = "xbar" ]')]),v._v("来解决这个问题，但是效率低")]),v._v(" "),e("li",[v._v("相反，使用"),e("code",[v._v("[[")]),v._v("：一个"),e("code",[v._v("bash")]),v._v("内置的具有特殊解析的比较器\n"),e("ul",[e("li",[v._v("也可以使用"),e("code",[v._v("&&")]),v._v("代替"),e("code",[v._v("-a")]),v._v("，"),e("code",[v._v("-o")]),v._v("连接"),e("code",[v._v("||")]),v._v("等等")])])])]),v._v(" "),e("h2",{attrs:{id:"可组合性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#可组合性"}},[v._v("#")]),v._v(" 可组合性")]),v._v(" "),e("p",[v._v("Shell之所以强大，部分原因在于它的可组合性。可以将多个程序链接在一起，而不是让一个程序做每一件事情。")]),v._v(" "),e("p",[v._v("关键字是"),e("code",[v._v("|")]),v._v("。")]),v._v(" "),e("p",[e("code",[v._v("a|b")]),v._v("表示同时运行"),e("code",[v._v("a")]),v._v("和"),e("code",[v._v("b")]),v._v("，将"),e("code",[v._v("a")]),v._v("的所有输出，当作"),e("code",[v._v("b")]),v._v("的输入，打印"),e("code",[v._v("b")]),v._v("的输出。")]),v._v(" "),e("p",[v._v("您启动的所有程序(“进程”)都有三个“流”:")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("STDIN")]),v._v("：当程序读取输入时，它从这里开始")]),v._v(" "),e("li",[e("code",[v._v("STDOUT")]),v._v("：当程序打印东西时，它就在这里")]),v._v(" "),e("li",[e("code",[v._v("STDERR")]),v._v("：程序可以选择使用的第二个输出")]),v._v(" "),e("li",[v._v("默认的，"),e("code",[v._v("STDIN")]),v._v("是您的键盘输入，"),e("code",[v._v("STDOUT")]),v._v("和"),e("code",[v._v("STDERR")]),v._v("都是您的终端。但是您可以改变他们！\n"),e("ul",[e("li",[e("code",[v._v("a | b")]),v._v("将"),e("code",[v._v("a")]),v._v("的输出当作"),e("code",[v._v("b")]),v._v("的输入")]),v._v(" "),e("li",[v._v("同样还有：\n"),e("ul",[e("li",[e("code",[v._v("a > foo")]),v._v("（将"),e("code",[v._v("a")]),v._v("的标准输出写入"),e("code",[v._v("foo")]),v._v("文件）")]),v._v(" "),e("li",[e("code",[v._v("a 2> foo")]),v._v("（将"),e("code",[v._v("a")]),v._v("的标准错误输出写入"),e("code",[v._v("foo")]),v._v("文件）")]),v._v(" "),e("li",[e("code",[v._v("a < foo")]),v._v("（"),e("code",[v._v("a")]),v._v("的标准输入是从"),e("code",[v._v("foo")]),v._v("文件读取的）")]),v._v(" "),e("li",[v._v("提示："),e("code",[v._v("tail -f")]),v._v("将打印文件内容，即使他正在被写入")])])])])])]),v._v(" "),e("p",[v._v("为什么这个这么有用？您亲自试试下面程序的输出！")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("ls | grep foo")]),v._v("：包含单词"),e("code",[v._v("foo")]),v._v("的所有文件")]),v._v(" "),e("li",[e("code",[v._v("ps | grep foo")]),v._v("：包含单词"),e("code",[v._v("foo")]),v._v("的所有进程")]),v._v(" "),e("li",[e("code",[v._v("journalctl | grep -i intel | tail -n5")]),v._v("：最后5条带有intel(不区分大小写)的系统日志消息")]),v._v(" "),e("li",[e("code",[v._v("who | sendmail -t me@example.com")]),v._v("：将登录用户列表发送到"),e("code",[v._v("me@example.com")])]),v._v(" "),e("li",[v._v("形成了许多数据处理的基础，稍后我们将讨论它")])]),v._v(" "),e("p",[v._v("Bash还提供了许多其他编写程序的方法。")]),v._v(" "),e("p",[v._v("您可以组合形成一个命令"),e("code",[v._v("(a; b) | tac")]),v._v("：先运行"),e("code",[v._v("a")]),v._v("，然后运行"),e("code",[v._v("b")]),v._v("，然后把他们的所有输出当作"),e("code",[v._v("tac")]),v._v("命令的输入，"),e("code",[v._v("tac")]),v._v("是一个将输入反序的命令。")]),v._v(" "),e("p",[v._v("一个不太为人所知但超级有用的方法是过程替换。"),e("code",[v._v("b <(a)")]),v._v("将运行a，为输出流生成一个临时文件名，并将该文件名传递给b。举个例子：")]),v._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[v._v("diff")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),v._v("journalctl -b -1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v("|")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[v._v("head")]),v._v(" -n20"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),v._v("journalctl -b -2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v("|")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[v._v("head")]),v._v(" -n20"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),v._v("\n")])])]),e("p",[v._v("将向您展示前一个引导日志的前20行与更前一个引导日志的前20行之间的区别。")]),v._v(" "),e("h2",{attrs:{id:"任务和进程控制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#任务和进程控制"}},[v._v("#")]),v._v(" 任务和进程控制")]),v._v(" "),e("p",[v._v("如果您在后台执行周期更长的任务呢？")]),v._v(" "),e("ul",[e("li",[v._v("在后台运行的程序是以"),e("code",[v._v("&")]),v._v("结尾\n"),e("ul",[e("li",[v._v("它会立即给你提示")]),v._v(" "),e("li",[v._v("如果你想同时运行两个程序，比如服务器和客户端，这很好解决："),e("code",[v._v("server & client")])]),v._v(" "),e("li",[v._v("注意：正在运行的程序仍将终端设置为标准输出，试一试："),e("code",[v._v("server > server.log & client")])])])]),v._v(" "),e("li",[v._v("通过"),e("code",[v._v("jobs")]),v._v("查看所有的进程\n"),e("ul",[e("li",[v._v("注意现实"),e("code",[v._v("Running")]),v._v("的")])])]),v._v(" "),e("li",[v._v("使用"),e("code",[v._v("fg %JOB")]),v._v("将其放到前台(没有参数是最新的)")]),v._v(" "),e("li",[v._v("如果您想将当前的程序放入后台："),e("code",[v._v("^Z")]),v._v("+"),e("code",[v._v("bg")]),v._v("(这里的"),e("code",[v._v("^Z")]),v._v("代表按"),e("code",[v._v("Ctrl+Z")]),v._v(")\n"),e("ul",[e("li",[e("code",[v._v("^Z")]),v._v("将当前的进程停止，并将它变成一个"),e("code",[v._v("job")])]),v._v(" "),e("li",[e("code",[v._v("bg")]),v._v("将最新的"),e("code",[v._v("job")]),v._v("在后台运行（就像使用了"),e("code",[v._v("&")]),v._v("）")])])]),v._v(" "),e("li",[v._v("后台"),e("code",[v._v("jobs")]),v._v("仍然绑定到当前会话，如果注销，则退出。您可以使用"),e("code",[v._v("disown")]),v._v("或者"),e("code",[v._v("nohup")]),v._v("切断这种绑定关系。")]),v._v(" "),e("li",[e("code",[v._v("$!")]),v._v("是最后一个后台进程的pid")])]),v._v(" "),e("p",[v._v("在你的电脑上运行的其他东西呢?")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("ps")]),v._v("很好用：列出正在运行的进程\n"),e("ul",[e("li",[e("code",[v._v("ps -A")]),v._v("：打印所有用户的进程（也包括ps ax）")]),v._v(" "),e("li",[e("code",[v._v("ps")]),v._v("有很多参数：可以通过"),e("code",[v._v("man ps")]),v._v("查看")])])]),v._v(" "),e("li",[e("code",[v._v("pgrep")]),v._v("：搜索进程（和"),e("code",[v._v("ps -A | grep")]),v._v("类似）\n"),e("ul",[e("li",[e("code",[v._v("pgrep -af")]),v._v("：通过参数搜索和显示")])])]),v._v(" "),e("li",[e("code",[v._v("kill")]),v._v("：通过ID向进程发送信号（pkill by search + -f）\n"),e("ul",[e("li",[v._v("信号告诉进程“做什么事”")]),v._v(" "),e("li",[v._v("最常见:"),e("code",[v._v("SIGKILL")]),v._v("("),e("code",[v._v("-9")]),v._v("或"),e("code",[v._v("-KILL")]),v._v(")：立刻退出，相当于"),e("code",[v._v("^\\")])]),v._v(" "),e("li",[v._v("还有："),e("code",[v._v("SIGTERM")]),v._v("("),e("code",[v._v("-15")]),v._v("or"),e("code",[v._v("-TERM")]),v._v(")：立刻优雅的退出，相当于"),e("code",[v._v("^C")])])])])]),v._v(" "),e("h2",{attrs:{id:"标志符"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#标志符"}},[v._v("#")]),v._v(" 标志符")]),v._v(" "),e("p",[v._v("大多数命令行程序都使用"),e("strong",[v._v("标志符")]),v._v("接受参数。标志符通常有短形式("),e("code",[v._v("-h")]),v._v(")和长形式("),e("code",[v._v("--help")]),v._v(")。通常运行"),e("code",[v._v("CMD -h")]),v._v("或"),e("code",[v._v("man CMD")]),v._v("会给你展示该"),e("code",[v._v("CMD")]),v._v("可用的标识符的列表。短标志通常可以组合使用，运行"),e("code",[v._v("rm -r -f")]),v._v("相当于运行"),e("code",[v._v("rm -rf")]),v._v("或者"),e("code",[v._v("rm -fr")]),v._v("。一些常见的标识符是有约定俗成的标准的，您会发现它们在很多命令中：")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("-a")]),v._v("一般指所有文件（也包括那些以点开头的）")]),v._v(" "),e("li",[e("code",[v._v("-f")]),v._v("通常指强制做什么事情，比如说"),e("code",[v._v("rm -f")])]),v._v(" "),e("li",[e("code",[v._v("-h")]),v._v("大多数命令都是显示帮助")]),v._v(" "),e("li",[e("code",[v._v("-v")]),v._v("通常启用详细输出")]),v._v(" "),e("li",[e("code",[v._v("-V")]),v._v("通常打印命令的版本")])]),v._v(" "),e("p",[v._v("此外，双破折号"),e("code",[v._v("--")]),v._v("用于内置命令和许多其他命令中，表示命令选项的结束，之后只接受位置参数。因此，如果您有一个可以使用"),e("code",[v._v("-v")]),v._v("参数的文件(文件类型支持使用)，并且想要"),e("code",[v._v("grep")]),v._v("它，"),e("code",[v._v("grep pattern -- -v")]),v._v("可以，但是"),e("code",[v._v("grep pattern -v")]),v._v("不行。事实上，创建这种文件的方法是"),e("code",[v._v("touch -- -v")]),v._v("。")]),v._v(" "),e("h2",{attrs:{id:"附录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#附录"}},[v._v("#")]),v._v(" 附录")]),v._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"https://github.com/hacker-tools/hacker-tools.github.io/blob/master/shell.md",target:"_blank",rel:"noopener noreferrer"}},[v._v("Shell"),e("OutboundLink")],1)]),v._v(" "),e("li",[e("a",{attrs:{href:"http://tuling56.site/ref/manual/shell.html",target:"_blank",rel:"noopener noreferrer"}},[v._v("Shell笔记"),e("OutboundLink")],1)]),v._v(" "),e("li",[e("a",{attrs:{href:"http://www.runoob.com/w3cnote/linux-shell-brackets-features.html",target:"_blank",rel:"noopener noreferrer"}},[v._v("Shell 中各种括号的作用"),e("OutboundLink")],1)]),v._v(" "),e("li",[e("a",{attrs:{href:"http://www.runoob.com/linux/linux-shell-test.html",target:"_blank",rel:"noopener noreferrer"}},[v._v("Shell test 命令"),e("OutboundLink")],1)])]),v._v(" "),e("hr"),v._v(" "),e("blockquote",[e("p",[v._v("Title: Shell 入门教程")]),v._v(" "),e("p",[v._v("Date: 2019.02.17")]),v._v(" "),e("p",[v._v("Author: zhangpeng")]),v._v(" "),e("p",[v._v("Github: "),e("a",{attrs:{href:"https://github.com/fullstack-zhangpeng",target:"_blank",rel:"noopener noreferrer"}},[v._v("https://github.com/fullstack-zhangpeng"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);_.default=o.exports}}]);