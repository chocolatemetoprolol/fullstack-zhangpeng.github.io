<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Shell 入门教程 | blog</title>
    <meta name="generator" content="VuePress 1.6.0">
    
    <meta name="description" content="Just a blog site">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/assets/css/0.styles.a555611f.css" as="style"><link rel="preload" href="/assets/js/app.2d13e179.js" as="script"><link rel="preload" href="/assets/js/3.5c4220a4.js" as="script"><link rel="preload" href="/assets/js/1.e1e7594c.js" as="script"><link rel="preload" href="/assets/js/46.23085cde.js" as="script"><link rel="prefetch" href="/assets/js/10.2bbf1c0a.js"><link rel="prefetch" href="/assets/js/11.35556b02.js"><link rel="prefetch" href="/assets/js/12.0a09b009.js"><link rel="prefetch" href="/assets/js/13.7357b6a1.js"><link rel="prefetch" href="/assets/js/14.ab3080ad.js"><link rel="prefetch" href="/assets/js/15.54aa8d0f.js"><link rel="prefetch" href="/assets/js/16.5f84513f.js"><link rel="prefetch" href="/assets/js/17.17dc11b7.js"><link rel="prefetch" href="/assets/js/18.2f100369.js"><link rel="prefetch" href="/assets/js/19.b5c49043.js"><link rel="prefetch" href="/assets/js/20.ccf92539.js"><link rel="prefetch" href="/assets/js/21.e1e93d13.js"><link rel="prefetch" href="/assets/js/22.67b1a54f.js"><link rel="prefetch" href="/assets/js/23.582ae47a.js"><link rel="prefetch" href="/assets/js/24.fd83620b.js"><link rel="prefetch" href="/assets/js/25.3f7e7e48.js"><link rel="prefetch" href="/assets/js/26.1f3dca34.js"><link rel="prefetch" href="/assets/js/27.02804b82.js"><link rel="prefetch" href="/assets/js/28.0b9b43cf.js"><link rel="prefetch" href="/assets/js/29.2b5d13dc.js"><link rel="prefetch" href="/assets/js/30.66c6c829.js"><link rel="prefetch" href="/assets/js/31.735ab463.js"><link rel="prefetch" href="/assets/js/32.f06edf29.js"><link rel="prefetch" href="/assets/js/33.5b7b163d.js"><link rel="prefetch" href="/assets/js/34.56621992.js"><link rel="prefetch" href="/assets/js/35.d0915cf9.js"><link rel="prefetch" href="/assets/js/36.cec5178f.js"><link rel="prefetch" href="/assets/js/37.47dfe25e.js"><link rel="prefetch" href="/assets/js/38.7bc0979b.js"><link rel="prefetch" href="/assets/js/39.a72dc940.js"><link rel="prefetch" href="/assets/js/4.5c64445a.js"><link rel="prefetch" href="/assets/js/40.a63e9dc1.js"><link rel="prefetch" href="/assets/js/41.55983c1b.js"><link rel="prefetch" href="/assets/js/42.f8bdfa0c.js"><link rel="prefetch" href="/assets/js/43.f88c2340.js"><link rel="prefetch" href="/assets/js/44.cc00f5ed.js"><link rel="prefetch" href="/assets/js/45.06bd7fdd.js"><link rel="prefetch" href="/assets/js/47.ab110359.js"><link rel="prefetch" href="/assets/js/48.56f42859.js"><link rel="prefetch" href="/assets/js/49.967d42bc.js"><link rel="prefetch" href="/assets/js/5.05fa4975.js"><link rel="prefetch" href="/assets/js/50.af70db17.js"><link rel="prefetch" href="/assets/js/51.d3e2bb94.js"><link rel="prefetch" href="/assets/js/52.f67c2788.js"><link rel="prefetch" href="/assets/js/53.17f3dbd6.js"><link rel="prefetch" href="/assets/js/54.126f9cfb.js"><link rel="prefetch" href="/assets/js/55.020193c0.js"><link rel="prefetch" href="/assets/js/56.0b83f89a.js"><link rel="prefetch" href="/assets/js/57.0d77d7e2.js"><link rel="prefetch" href="/assets/js/58.f6bd74c2.js"><link rel="prefetch" href="/assets/js/59.682ba896.js"><link rel="prefetch" href="/assets/js/6.16f45c36.js"><link rel="prefetch" href="/assets/js/7.84d39ee3.js"><link rel="prefetch" href="/assets/js/8.95e6d396.js"><link rel="prefetch" href="/assets/js/9.3512f750.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a555611f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-2d5f533b><div data-v-2d5f533b><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-2d5f533b data-v-2d5f533b><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-2d5f533b data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>blog</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>zhangpeng</span>
            
          <!---->
          2020
        </a></span></div></div> <div class="hide" data-v-2d5f533b><header class="navbar" data-v-2d5f533b><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont undefined"></i>
  Home
</a></div><div class="nav-item"><a href="/about.html" class="nav-link"><i class="iconfont undefined"></i>
  About
</a></div><div class="nav-item"><a href="https://github.com/fullstack-zhangpeng" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-2d5f533b></div> <aside class="sidebar" data-v-2d5f533b><div class="personal-info-wrapper" data-v-ca798c94 data-v-2d5f533b><!----> <h3 class="name" data-v-ca798c94>
    zhangpeng
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>0</h3> <h6 data-v-ca798c94>Article</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>0</h3> <h6 data-v-ca798c94>Tag</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont undefined"></i>
  Home
</a></div><div class="nav-item"><a href="/about.html" class="nav-link"><i class="iconfont undefined"></i>
  About
</a></div><div class="nav-item"><a href="https://github.com/fullstack-zhangpeng" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Golang</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/go/go-command.html" class="sidebar-link">Go 1.13 中 Go command 修改</a></li><li><a href="/go/go.html" class="sidebar-link">Go 基础</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Flutter</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/flutter/install-flutter.html" class="sidebar-link">Flutter 安装和环境配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>iOS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ios/initializer.html" class="sidebar-link">类的初始化方法</a></li><li><a href="/ios/create-pod.html" class="sidebar-link">如何创建一个公有 Pod 库</a></li><li><a href="/ios/sandbox.html" class="sidebar-link">App 沙盒</a></li><li><a href="/ios/block-statement.html" class="sidebar-link">Block 的声明方式</a></li><li><a href="/ios/rac-eventbus-rxjava.html" class="sidebar-link">Rac EventBus RxJava</a></li><li><a href="/ios/dynamic-icon.html" class="sidebar-link">动态更换 App 图标</a></li><li><a href="/ios/sirikit.html" class="sidebar-link">SiriKit 人机界面指南</a></li><li><a href="/ios/gcd.html" class="sidebar-link">GCD 同步异步与串行并行</a></li><li><a href="/ios/cocoapods.html" class="sidebar-link">CocoaPods 安装及错误处理</a></li><li><a href="/ios/message-forwarding.html" class="sidebar-link">iOS 消息转发机制</a></li><li><a href="/ios/nsmethodsignature-nsinvocation.html" class="sidebar-link">NSMethodSignature 和 NSInvocation</a></li><li><a href="/ios/build-failed.html" class="sidebar-link">常见的编译失败</a></li><li><a href="/ios/hook-system-delegate-method.html" class="sidebar-link">Hook 系统代理方法</a></li><li><a href="/ios/create-qr-code.html" class="sidebar-link">二维码生成及定制</a></li><li><a href="/ios/wkwebview.html" class="sidebar-link">WKWebView 使用及注意事项</a></li><li><a href="/ios/interview.html" class="sidebar-link">面试啊面试~</a></li><li><a href="/ios/double-to-nsstring.html" class="sidebar-link">double 转 NSString 出现精度异常</a></li><li><a href="/ios/widget-development.html" class="sidebar-link">Widget 开发-开发篇</a></li><li><a href="/ios/widget-configuration.html" class="sidebar-link">Widget 开发-配置篇</a></li><li><a href="/ios/read-pdf-with-cryptographic-seal.html" class="sidebar-link">读取一个带有加密印章的 PDF</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>LeetCode</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/leetcode/two-sum.html" class="sidebar-link">两数之和</a></li><li><a href="/leetcode/valid-parentheses.html" class="sidebar-link">有效的括号</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Mac</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mac/tips-for-mac.html" class="sidebar-link">Mac 的日常使用</a></li><li><a href="/mac/update-git-version.html" class="sidebar-link">Mac 升级 Git 版本</a></li><li><a href="/mac/install-charles-certificate.html" class="sidebar-link">Charles 安装证书</a></li><li><a href="/mac/a-better-terminal.html" class="sidebar-link">iTerm2 一个更好用的终端</a></li><li><a href="/mac/reinstall-mac-system.html" class="sidebar-link">Mac 系统重装</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Ubuntu</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ubuntu/install-mysql.html" class="sidebar-link">Ubuntu 安装 MySQL</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>随见随学</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn/tips-for-git.html" class="sidebar-link">Git 的日常使用</a></li><li><a href="/learn/clean-up-git-repository.html" class="sidebar-link">如何清理 Git 仓库</a></li><li><a href="/learn/judge-algorithm-quality.html" class="sidebar-link">如何评判算法好坏</a></li><li><a href="/learn/keep-alive-ssh.html" class="sidebar-link">如何保持 SSH 服务不掉线</a></li><li><a href="/learn/introduction-to-shell.html" aria-current="page" class="active sidebar-link">Shell 入门教程</a></li><li><a href="/learn/introduction-to-appleScript.html" class="sidebar-link">AppleScript 入门与实践</a></li><li><a href="/learn/set-up-hexo-blog.html" class="sidebar-link">搭建 Hexo Blog</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>基础知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/basicknowledge/date-formatter.html" class="sidebar-link">常用的日期格式化格式</a></li><li><a href="/basicknowledge/introduction-to-restful.html" class="sidebar-link">RESTful 笔记</a></li><li><a href="/basicknowledge/http-status-code.html" class="sidebar-link">HTTP 状态码</a></li><li><a href="/basicknowledge/bit-operation.html" class="sidebar-link">简明扼要带你学位运算</a></li><li><a href="/basicknowledge/uri-url-urn.html" class="sidebar-link">URI、URL、URN 的差异与联系</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e></h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>zhangpeng</span>
            
          <!---->
          2020
        </a></span></div></div> <div data-v-2d5f533b><main class="page"><div class="page-title" style="display:none;"><h1 class="title">Shell 入门教程</h1> <div data-v-3b7f5bdf><i class="iconfont reco-account" data-v-3b7f5bdf><span data-v-3b7f5bdf>zhangpeng</span></i> <!----> <i class="iconfont reco-eye" data-v-3b7f5bdf><span id="/learn/introduction-to-shell.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-3b7f5bdf><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <!----></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="shell-入门教程"><a href="#shell-入门教程" class="header-anchor">#</a> Shell 入门教程</h1> <p><strong>本文为译文，原文链接</strong>：<a href="https://github.com/hacker-tools/hacker-tools.github.io/blob/master/shell.md" target="_blank" rel="noopener noreferrer">shell<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><code>shell</code>是一个高效的、文本化的计算机接口。</p> <p><code>shell</code>提示符：当你打开终端时看到的一切。可以让用户执行的程序和命令，常见的有：</p> <ul><li><code>cd</code>改变目录</li> <li><code>ls</code>列出文件和目录</li> <li><code>mv</code>和<code>cp</code>移动和复制文件</li></ul> <p>但是<code>shell</code>允许您做更多的事情；您可以调用计算机上的任何程序，并且命令行工具的存在就是为了完成您可能想做的任何事情。他们往往比他们的图形对手更有效率。我们这门课会讲到很多。</p> <p><code>shell</code>提供交互式编程语言 (&quot;脚本&quot;)。有很多种<code>shell</code>：</p> <ul><li>您可能用过<code>sh</code>或者<code>bash</code></li> <li>和语言相关的<code>shell</code>：<code>csh</code></li> <li>或者更好用的shell：<code>fish</code>，<code>zsh</code>，<code>ksh</code></li></ul> <p>在这个课堂上，我们将关注无处不在的<code>sh</code>和<code>bash</code>，但是使用其他的<code>shell</code>感觉更好。我喜欢<code>fish</code>。</p> <p>在您的工具箱中，<code>shell</code>程序是一个非常有用的工具。可以直接在提示符下编写程序，也可以将程序写入文件。</p> <p>通过<code>#!/bin/sh</code>+<code>chmod +x</code>将shell程序变成可以执行的</p> <h2 id="使用shell工作"><a href="#使用shell工作" class="header-anchor">#</a> 使用<code>shell</code>工作</h2> <p>将一个命令运行多次：</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">seq</span> <span class="token number">1</span> <span class="token number">5</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> hello<span class="token punctuation">;</span> <span class="token keyword">done</span>
</code></pre></div><p>有很多东西可以展开来讲：</p> <ul><li><p><code>for x in list; do BODY; done</code></p> <ul><li><code>;</code>终止一个命令 -- 相当于换行</li> <li>遍历<code>list</code>，将每个值赋值给<code>x</code>，然后运行</li> <li>分割标志符是“空格”，我们稍后会讲到</li> <li><code>shell</code>中没有花括号，所以使用<code>do</code>+<code>done</code></li></ul></li> <li><p><code>$(seq 1 5)</code></p> <ul><li>运行<code>seq</code>命令，参数分别为1和5</li> <li>使用括号内命令的输出替换 $()</li> <li>相当于</li></ul> <div class="language-Shell extra-class"><pre class="language-shell"><code> <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span>
</code></pre></div></li> <li><p><code>echo hello</code></p> <ul><li><code>shell</code>脚本中的所有内容都是命令</li> <li>在本例中，运行<code>echo</code>命令，将打印该命令的参数<code>hello</code></li> <li>所有命令都可以在<code>$PATH</code>搜索到</li></ul></li></ul> <p>我们可以举个例子：</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token keyword">for</span> <span class="token for-or-select variable">f</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$f</span><span class="token punctuation">;</span> <span class="token keyword">done</span>
</code></pre></div><p>将打印当前目录中的每个文件名。可以使用<code>=</code>设置变量的值（<code>=</code>两边不需要空格）</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">foo</span><span class="token operator">=</span>bar
<span class="token builtin class-name">echo</span> <span class="token variable">$foo</span>
</code></pre></div><p>这里也有一些特殊的变量：</p> <ul><li><code>$1</code>-<code>$9</code>：脚本的参数</li> <li><code>$0</code>：脚本的名称</li> <li><code>$#</code>：脚本的参数个数</li> <li><code>$$</code>：当前脚本的进程<code>ID</code></li></ul> <p>只打印目录</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token keyword">for</span> <span class="token for-or-select variable">f</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token keyword">if</span> <span class="token builtin class-name">test</span> -d <span class="token variable">$f</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token function">dir</span> <span class="token variable">$f</span><span class="token punctuation">;</span> <span class="token keyword">fi</span><span class="token punctuation">;</span> <span class="token keyword">done</span>
</code></pre></div><p>这里展开来讲：</p> <ul><li><code>if CONDITION; then BODY; fi</code> <ul><li><code>CONDITION</code>是一个命令，如果返回时为0<code>(success)</code>，就会执行<code>BODY</code></li> <li>也可以继续执行<code>else</code>或者<code>elif</code></li> <li>同样，没有花括号，所以使用<code>then</code>和<code>fi</code></li></ul></li> <li><code>test</code>是另外一个命令，提供各式各样的检查与对比功能，退出时会返回对比结果，如果为真，则返回0<code>($?)</code> <ul><li><code>man COMMAND</code>会对您有很大的帮助，比如：<code>man test</code></li> <li>也可以使用<code>[</code>+<code>]</code>执行，比如：<code>[ -d $f ]</code> <ul><li>查看一下<code>man test</code>和<code>which [</code>的执行结果</li></ul></li></ul></li></ul> <p>可是等等！结果是错误的！如果有个文件叫做“我的文档怎么办”？</p> <ul><li><code>for f in $(ls)</code>展开为<code>for f in My Documents</code></li> <li>先以<code>My</code>为<code>test</code>的执行参数，然后以<code>Documents</code>作为参数</li> <li>这不是我们想要的！</li> <li><code>shell</code>脚本中导致出现问题最多的原因</li></ul> <h2 id="参数分割"><a href="#参数分割" class="header-anchor">#</a> 参数分割</h2> <p><code>Bash</code>是通过空格分割参数；但这并不总是您想要的！</p> <ul><li>需要使用引号处理<code>for f in &quot;My Documents&quot;</code>中<code>f</code>的空格，才能正确的执行</li> <li>其他地方也有同样的问题，您看到过吗？比如<code>test -d $f</code>：如果<code>$f</code>中包含空格，<code>test</code>将会发生错误！</li> <li><code>echo</code>碰巧没有问题，因为按空格分隔联接，但是如果文件名包含换行符，怎么办？！变成空格！</li> <li>引号用于所有不希望被拆分的参数</li> <li>我们该如何修复上面的脚本呢？您认为<code>for f in &quot;$(ls)&quot;</code>怎么样？</li></ul> <p>答案是通配符！</p> <ul><li>Bash知道如何使用模板查找文件：
<ul><li><code>*</code> 任意字符串</li> <li><code>?</code> 任意字符</li> <li><code>{a,b,c}</code> 这些字符中的任意一个</li></ul></li> <li><code>for f in *</code>：这个文件夹下所有的文件</li> <li>在使用通配符时，每个匹配的文件都将变成自己的参数
<ul><li>在使用时，仍需要确保引号的正确使用：<code>test -d &quot;$f&quot;</code></li></ul></li> <li>可以使用这些提高通配符效率：
<ul><li><code>for f in a*</code>: 当前文件夹下，所有以<code>a</code>开头的文件</li> <li><code>for f in foo/*.txt</code>:<code>foo</code>文件夹下，所有以<code>.txt</code>结尾的文件</li> <li><code>for f in foo/*/p??.txt</code>: 在<code>foo</code>的子文件夹下，以<code>p</code>开头的三个字母的文件</li></ul></li></ul> <p>空格的问题不止于此：</p> <ul><li><code>if [ $foo = &quot;bar&quot; ]; then</code>-- 看看这个问题？</li> <li>如果<code>$foo</code>是空的呢？<code>[</code>的参数是<code>=</code>和<code>bar</code>...</li> <li>可以用<code>[ x$foo = &quot;xbar&quot; ]</code>来解决这个问题，但是效率低</li> <li>相反，使用<code>[[</code>：一个<code>bash</code>内置的具有特殊解析的比较器
<ul><li>也可以使用<code>&amp;&amp;</code>代替<code>-a</code>，<code>-o</code>连接<code>||</code>等等</li></ul></li></ul> <h2 id="可组合性"><a href="#可组合性" class="header-anchor">#</a> 可组合性</h2> <p>Shell之所以强大，部分原因在于它的可组合性。可以将多个程序链接在一起，而不是让一个程序做每一件事情。</p> <p>关键字是<code>|</code>。</p> <p><code>a|b</code>表示同时运行<code>a</code>和<code>b</code>，将<code>a</code>的所有输出，当作<code>b</code>的输入，打印<code>b</code>的输出。</p> <p>您启动的所有程序(“进程”)都有三个“流”:</p> <ul><li><code>STDIN</code>：当程序读取输入时，它从这里开始</li> <li><code>STDOUT</code>：当程序打印东西时，它就在这里</li> <li><code>STDERR</code>：程序可以选择使用的第二个输出</li> <li>默认的，<code>STDIN</code>是您的键盘输入，<code>STDOUT</code>和<code>STDERR</code>都是您的终端。但是您可以改变他们！
<ul><li><code>a | b</code>将<code>a</code>的输出当作<code>b</code>的输入</li> <li>同样还有：
<ul><li><code>a &gt; foo</code>（将<code>a</code>的标准输出写入<code>foo</code>文件）</li> <li><code>a 2&gt; foo</code>（将<code>a</code>的标准错误输出写入<code>foo</code>文件）</li> <li><code>a &lt; foo</code>（<code>a</code>的标准输入是从<code>foo</code>文件读取的）</li> <li>提示：<code>tail -f</code>将打印文件内容，即使他正在被写入</li></ul></li></ul></li></ul> <p>为什么这个这么有用？您亲自试试下面程序的输出！</p> <ul><li><code>ls | grep foo</code>：包含单词<code>foo</code>的所有文件</li> <li><code>ps | grep foo</code>：包含单词<code>foo</code>的所有进程</li> <li><code>journalctl | grep -i intel | tail -n5</code>：最后5条带有intel(不区分大小写)的系统日志消息</li> <li><code>who | sendmail -t me@example.com</code>：将登录用户列表发送到<code>me@example.com</code></li> <li>形成了许多数据处理的基础，稍后我们将讨论它</li></ul> <p>Bash还提供了许多其他编写程序的方法。</p> <p>您可以组合形成一个命令<code>(a; b) | tac</code>：先运行<code>a</code>，然后运行<code>b</code>，然后把他们的所有输出当作<code>tac</code>命令的输入，<code>tac</code>是一个将输入反序的命令。</p> <p>一个不太为人所知但超级有用的方法是过程替换。<code>b &lt;(a)</code>将运行a，为输出流生成一个临时文件名，并将该文件名传递给b。举个例子：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">diff</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span>journalctl -b -1 <span class="token operator">|</span> <span class="token function">head</span> -n20<span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span>journalctl -b -2 <span class="token operator">|</span> <span class="token function">head</span> -n20<span class="token punctuation">)</span>
</code></pre></div><p>将向您展示前一个引导日志的前20行与更前一个引导日志的前20行之间的区别。</p> <h2 id="任务和进程控制"><a href="#任务和进程控制" class="header-anchor">#</a> 任务和进程控制</h2> <p>如果您在后台执行周期更长的任务呢？</p> <ul><li>在后台运行的程序是以<code>&amp;</code>结尾
<ul><li>它会立即给你提示</li> <li>如果你想同时运行两个程序，比如服务器和客户端，这很好解决：<code>server &amp; client</code></li> <li>注意：正在运行的程序仍将终端设置为标准输出，试一试：<code>server &gt; server.log &amp; client</code></li></ul></li> <li>通过<code>jobs</code>查看所有的进程
<ul><li>注意现实<code>Running</code>的</li></ul></li> <li>使用<code>fg %JOB</code>将其放到前台(没有参数是最新的)</li> <li>如果您想将当前的程序放入后台：<code>^Z</code>+<code>bg</code>(这里的<code>^Z</code>代表按<code>Ctrl+Z</code>)
<ul><li><code>^Z</code>将当前的进程停止，并将它变成一个<code>job</code></li> <li><code>bg</code>将最新的<code>job</code>在后台运行（就像使用了<code>&amp;</code>）</li></ul></li> <li>后台<code>jobs</code>仍然绑定到当前会话，如果注销，则退出。您可以使用<code>disown</code>或者<code>nohup</code>切断这种绑定关系。</li> <li><code>$!</code>是最后一个后台进程的pid</li></ul> <p>在你的电脑上运行的其他东西呢?</p> <ul><li><code>ps</code>很好用：列出正在运行的进程
<ul><li><code>ps -A</code>：打印所有用户的进程（也包括ps ax）</li> <li><code>ps</code>有很多参数：可以通过<code>man ps</code>查看</li></ul></li> <li><code>pgrep</code>：搜索进程（和<code>ps -A | grep</code>类似）
<ul><li><code>pgrep -af</code>：通过参数搜索和显示</li></ul></li> <li><code>kill</code>：通过ID向进程发送信号（pkill by search + -f）
<ul><li>信号告诉进程“做什么事”</li> <li>最常见:<code>SIGKILL</code>(<code>-9</code>或<code>-KILL</code>)：立刻退出，相当于<code>^\</code></li> <li>还有：<code>SIGTERM</code>(<code>-15</code>or<code>-TERM</code>)：立刻优雅的退出，相当于<code>^C</code></li></ul></li></ul> <h2 id="标志符"><a href="#标志符" class="header-anchor">#</a> 标志符</h2> <p>大多数命令行程序都使用<strong>标志符</strong>接受参数。标志符通常有短形式(<code>-h</code>)和长形式(<code>--help</code>)。通常运行<code>CMD -h</code>或<code>man CMD</code>会给你展示该<code>CMD</code>可用的标识符的列表。短标志通常可以组合使用，运行<code>rm -r -f</code>相当于运行<code>rm -rf</code>或者<code>rm -fr</code>。一些常见的标识符是有约定俗成的标准的，您会发现它们在很多命令中：</p> <ul><li><code>-a</code>一般指所有文件（也包括那些以点开头的）</li> <li><code>-f</code>通常指强制做什么事情，比如说<code>rm -f</code></li> <li><code>-h</code>大多数命令都是显示帮助</li> <li><code>-v</code>通常启用详细输出</li> <li><code>-V</code>通常打印命令的版本</li></ul> <p>此外，双破折号<code>--</code>用于内置命令和许多其他命令中，表示命令选项的结束，之后只接受位置参数。因此，如果您有一个可以使用<code>-v</code>参数的文件(文件类型支持使用)，并且想要<code>grep</code>它，<code>grep pattern -- -v</code>可以，但是<code>grep pattern -v</code>不行。事实上，创建这种文件的方法是<code>touch -- -v</code>。</p> <h2 id="附录"><a href="#附录" class="header-anchor">#</a> 附录</h2> <ol><li><a href="https://github.com/hacker-tools/hacker-tools.github.io/blob/master/shell.md" target="_blank" rel="noopener noreferrer">Shell<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://tuling56.site/ref/manual/shell.html" target="_blank" rel="noopener noreferrer">Shell笔记<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.runoob.com/w3cnote/linux-shell-brackets-features.html" target="_blank" rel="noopener noreferrer">Shell 中各种括号的作用<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.runoob.com/linux/linux-shell-test.html" target="_blank" rel="noopener noreferrer">Shell test 命令<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <hr> <blockquote><p>Title: Shell 入门教程</p> <p>Date: 2019.02.17</p> <p>Author: zhangpeng</p> <p>Github: <a href="https://github.com/fullstack-zhangpeng" target="_blank" rel="noopener noreferrer">https://github.com/fullstack-zhangpeng<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.2d13e179.js" defer></script><script src="/assets/js/3.5c4220a4.js" defer></script><script src="/assets/js/1.e1e7594c.js" defer></script><script src="/assets/js/46.23085cde.js" defer></script>
  </body>
</html>
